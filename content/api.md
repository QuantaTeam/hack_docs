---
title: "API"
toc: true
weight: 10
---

HOST: <https://hack.barklan.com/api> \
Обязательные праметры помечены `*`.

## Список изменений

- **версия 1.0.0 - 27 Октября** \
   Добавлен путь `/applications/{id}` \
   Добавлен путь `/applications/anomalies`
- **версия 1.1.0 - 30 Октября 8:30 PM** \
   Добавлен путь `/applications`
- **версия 1.2.0 - 30 Октября 10:00 PM** \
   Добавлен путь `/applications/meta`
- **версия 1.3.0 - 30 Октября 11:30 PM** \
   Добавлен ключ "Наименование дефекта" в ответе `/applications/anomalies`
- **версия 1.4.0 - 31 Октября 2:40 PM** \
   Добавлены параметры `district_name`, `name_of_the_management_company`, `name_of_the_service_organization`, `source_name`, `quality_evaluation` в `/applications` и такие же ключи в ответе `/applications/meta`
- **версия 1.5.0 - 31 Октября 2:55 PM** \
   Добавлен параметр `query` в `/applications`
- **версия 2.0.0 - 1 Ноября 10:15 PM** \
   Удалены параметры `closure_timestamp_start` и `closure_timestamp_end` в `/applications`
- **версия 3.0.0 - 1 Ноября 11:30 PM** \
   Переименованы все атрибуты в `/applications`, `/applications/{id}`, `/applications/anomalies` на цифры
- **версия 3.1.0 - 5 Ноября 01:00** \
   Добавлен параметр `with_comment` в `/applications`
- **версия 3.2.0 - 5 Ноября 12:08 PM** \
    Добавлен параметр `result_desc` в `/applications`

## Пути

---

### /applications/{id}

Возвращает одну заявку по заданному id.

---

### /applications

Возвращает список всех заявок

#### Параметры запроса

- `skip`: integer - соответствует значению `OFFSET` в SQL запросе
- `limit`: integer - соответствует значение `LIMIT` в SQL запросе
- `is_anomaly`: boolean - является ли заявка аномальной
- `query`: string - текстовый поиск (new in 1.5.0)
- `with_comment`: boolean - есть ли комментарии
- `result_desc`: string - результативность

Следующие параметры могут быть переданы несколько раз или в виде массива:

- `defect_category_name`: string - Наименование категории дефекта
- `type_of_work_performed`: string - Вид выполненных работ
- `district_code`: string - Код района
- `district_name`: string - Наименование района (new in 1.4.0)
- `name_of_the_management_company`: string - Наименование управляющей компании (new in 1.4.0)
- `name_of_the_service_organization`: string - Наименование обслуживавшей организации (new in 1.4.0)
- `source_name`: string - Наименование источника поступления (new in 1.4.0)
- `quality_evaluation`: string - Оценка качества выполнения работ (new in 1.4.0)

Следующие параметры имеют вид строки в формате timestamp по RFC 3339 (пример: `2021-01-06T12:10:05+00:00`):

- `creation_timestamp_start`: string - дата создания заявки должна быть **после** указанного значения
- `creation_timestamp_end`: string - дата создания заявки должна быть **до** указанного значения

---

### /applications/anomalies

Возвращает список всех аномальных заявок в данном формате:

```json
[
    {
        "id": 271602,
        "geo_coordinates": [
            55.65559387207031,
            37.46931457519531
        ],
        "Наименование дефекта": "Электроплиты"
     },
    ...
]
```

---

### /applications/meta

Возвращает список метаданных:

```json
{
    "defect_category_name": [...],
    "type_of_work_performed": [...],
    "district_code": [...],
    "district_name": [...],
    "name_of_the_management_company": [...],
    "name_of_the_service_organization": [...],
    "source_name": [...],
    "quality_evaluation": [...]
}
```

---

## Приложения

### Описание атрибутов

0. "Корневой ИД заявки" TEXT,
1. "ИД версии заявки" TEXT,
2. "Номер заявки" TEXT,
3. "Уникальный номер обращения ГУ (mos.ru)" TEXT,
4. "Дата создания заявки в формате Timezone" TEXT,
5. "Дата начала действия версии заявки в формате Timezone" TEXT,
6. "Наименование источника поступления заявки" TEXT,
7. "Код источника поступления заявки" TEXT,
8. "Имя создателя заявки" TEXT,
9. "Признак инцидента" TEXT,
10. "Корневой идентификатор материнской заявки" TEXT,
11. "Номер материнской заявки" TEXT,
12. "Пользователь, внесший последнее изменение" TEXT,
13. "Роль организации пользователя" TEXT,
14. "Комментарии" TEXT,
15. "Наименование категории дефекта" TEXT,
16. "Корневой идентификатор категории дефекта" TEXT,
17. "Код категории дефекта" TEXT,
18. "Наименование дефекта" TEXT,
19. "Краткое наименование дефекта" TEXT,
20. "Идентификатор дефекта" TEXT,
21. "Код дефекта" TEXT,
22. "Признак дефекта возврата на доработку" TEXT,
23. "Описание" TEXT,
24. "Наличие у заявителя вопроса" TEXT,
25. "Наименование категории срочности: Аварийная, Обычная" TEXT,
26. "Код категории срочности" TEXT,
27. "Наименование округа" TEXT,
28. "Код округа" TEXT,
29. "Наименование района" TEXT,
30. "Код района" TEXT,
31. "Адрес проблемы" TEXT,
32. "УНОМ" TEXT,
33. "Подъезд" TEXT,
34. "Этаж" TEXT,
35. "Квартира" TEXT,
36. "ОДС (номер объединенной диспетчерской службы)" TEXT,
37. "Наименование управляющей компании" TEXT,
38. "Наименование обслуживавшей организации (исполнителя)" TEXT,
39. "Идентификатор организации-исполнителя" TEXT,
40. "ИНН организации-исполнителя" TEXT,
41. "Наименование статуса заявки" TEXT,
42. "Код статуса заявки" TEXT,
43. "Наименование причины отказа исполнителя" TEXT,
44. "Идентификатор причины отказа исполнителя" TEXT,
45. "Наименование причины отказа Организации-исполнителя" TEXT,
46. "Идентификатор причины отказа Организации-исполнителя" TEXT,
47. "Вид выполненных работ" TEXT,
48. "Идентификатор корневой версии вида выполненных работ" TEXT,
49. "Израсходованный материал" TEXT,
50. "Наименование охранных мероприятий" TEXT,
51. "Идентификатор корневой версии охранных мероприятий" TEXT,
52. "Результативность" TEXT,
53. "Код результативности" TEXT,
54. "Кол-во возвратов на доработку" TEXT,
55. "Дата последнего возврата на доработку" TEXT,
56. "Признак нахождения на доработке" TEXT,
57. "Признак “Оповещен”" TEXT,
58. "Дата закрытия" TEXT,
59. "Желаемое время с" TEXT,
60. "Желаемое время до" TEXT,
61. "Дата отзыва/оценки" TEXT,
62. "Отзыв" TEXT,
63. "Оценка качества выполнения работ" TEXT,
64. "Код оценки качества выполнения ра" TEXT,
65. "Наименование категории платности" TEXT,
66. "Код категории платности" TEXT,
67. "Признак оплаты картой" TEXT
68. Гео координаты
69. id
70. is_anomaly
71. applicant_id
72. geo_not_found
